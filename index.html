<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Weather Dashboard</title>
</head>
<header>Traveller's Guide</header>

<body>
    <!-- Searching and search history users input -->
    <section>City Search
        <form id="city-form">
            <label for="city-input">Search for a city</label>
            <input type="text" id="city-input"><br>
            <input id="find-city" type="submit" value="City Search">
        </form>
    </section>
    <div id="city-view"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        var searchHistory = []

        // Build button to trigger AJAX call
        $("#find-city").on("click", function (event) {
            event.preventDefault();
            var city = $("#city-input").val();
            searchHistory.push(city)
            // API key
            var APIKey = "e12e920767d761fecb84037722ebae76";
            var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" + city + "&appid=" + APIKey;
            $("#city-view").html("");
            // AJAX call
            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                console.log(response, $("city-view").html());
                // var cityName = $("<div class='city'>");
                var temperature = ((response.main.temp - 273.15) * 4.5) - 32;
                var tempel = $("<div>").text(temperature.toFixed(2))
                $("#city-view").append(tempel);
                var icon = (response.weather[0].icon);
                var iconEl = $("<img>").attr("src","http://openweathermap.org/img/wn/" + icon +"@2x.png");
                $("#city-view").append(iconEl);


            });
        });

    </script>
    </div>
</body>

</html>

